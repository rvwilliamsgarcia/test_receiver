<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">

<head>
    <meta charset="UTF-8">
    <title> Receiver 2 </title>

    <meta name="author" content="Rashid Williams-Garcia">
    <meta name="description" content="...and receive it using this widget!">
</head>

<script type="text/javascript">
	function receiveFunc(data) {
		widget.setBody([{
			tag: "h1",
			text: "Receiver"
		},
		{
			tag: "p",
			text: "My name is " + data
		}]);
		
		console.log("received!");
	}
	
	var MyWidget = {
		onLoad: function(){console.log("loading...");},
		receiveEvent: function(){
			require(["DS/PlatformAPI/PlatformAPI"], function(API){
				API.subscribe("display", receiveFunc);
			});
		}
	};
	
	widget.addEvent("onLoad", MyWidget.onLoad);
	widget.addEvent("onLoad", MyWidget.receiveEvent);
	widget.addEvent("onRefresh", MyWidget.receiveEvent);
</script>


<body>
    <h1> Receiver </h1>
    
    <p id="display"></p>
</body>
</html>